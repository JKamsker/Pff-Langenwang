{{ define "main" }}
<style>
/* ══════════════════════════════════════════════════════
   ÜBER UNS PAGE — Design System Applied
══════════════════════════════════════════════════════ */

/* h2 → section-divider style (matches termine-section-header) */
.page-content h2 {
  font-family: var(--font-display) !important;
  font-size: 0.78rem !important;
  font-weight: 600 !important;
  letter-spacing: 0.14em !important;
  text-transform: uppercase !important;
  color: var(--sage) !important;
  display: flex !important;
  align-items: center !important;
  gap: 1rem !important;
  margin-top: var(--space-lg) !important;
  margin-bottom: var(--space-md) !important;
  padding-bottom: 0 !important;
  position: static !important;
  line-height: 1.4 !important;
}
.page-content h2::before {
  content: '';
  display: block;
  width: 2rem;
  height: 1px;
  background: rgba(27, 58, 45, 0.18);
  flex-shrink: 0;
}
.page-content h2::after {
  content: '' !important;
  display: block !important;
  position: static !important;
  flex: 1 !important;
  height: 1px !important;
  width: auto !important;
  background: linear-gradient(to right, rgba(27, 58, 45, 0.18), transparent) !important;
  background-color: transparent !important;
  border-radius: 0 !important;
  bottom: auto !important;
  left: auto !important;
}

/* Lead paragraph (first p after hero) */
.ueber-lead {
  font-size: 1.1rem;
  line-height: 1.85;
  color: rgba(61, 46, 30, 0.8);
  margin-bottom: var(--space-md);
}

/* ── Motto callout ── */
.ueber-motto-block {
  position: relative;
  background: var(--forest);
  border-radius: var(--radius-md);
  padding: var(--space-md) var(--space-md) var(--space-md) 5rem;
  color: var(--cream);
  overflow: hidden;
  margin-bottom: var(--space-md);
}
.ueber-motto-block::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 70% 100% at -10% 60%, rgba(107, 143, 113, 0.22) 0%, transparent 65%),
    radial-gradient(ellipse 40% 60% at 100% 0%, rgba(196, 146, 58, 0.08) 0%, transparent 60%);
  pointer-events: none;
}
.ueber-motto-block::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(circle, rgba(246,241,234,0.07) 1px, transparent 1px);
  background-size: 18px 18px;
  pointer-events: none;
}
.ueber-motto-icon {
  position: absolute;
  left: var(--space-md);
  top: 50%;
  transform: translateY(-50%);
  width: 2.25rem;
  height: 2.25rem;
  color: var(--amber);
  opacity: 0.7;
  z-index: 1;
}
.ueber-motto-block p {
  position: relative;
  z-index: 1;
  font-size: 0.95rem;
  color: rgba(246, 241, 234, 0.82);
  line-height: 1.8;
  margin-bottom: 0 !important;
}
.ueber-motto-block strong {
  color: var(--cream);
  font-weight: 600;
}
.ueber-motto-block em {
  color: rgba(196, 146, 58, 0.95);
  font-family: var(--font-display);
  font-size: 1.1em;
  font-variation-settings: "opsz" 20;
}

/* ── Geschichte timeline ── */
.ueber-history {
  position: relative;
  padding-left: 2.25rem;
}
.ueber-history::before {
  content: '';
  position: absolute;
  left: 5px;
  top: 0.6rem;
  bottom: 0.6rem;
  width: 1.5px;
  background: linear-gradient(to bottom, var(--amber), var(--sage), rgba(107, 143, 113, 0.1));
  border-radius: 2px;
}
.ueber-history p {
  position: relative;
  margin-bottom: var(--space-md) !important;
  font-size: 0.925rem;
  line-height: 1.85;
  color: rgba(61, 46, 30, 0.8);
}
.ueber-history p::before {
  content: '';
  position: absolute;
  left: -2.15rem;
  top: 0.55em;
  width: 9px;
  height: 9px;
  border-radius: 50%;
  background: var(--cream);
  border: 2px solid var(--amber);
  box-shadow: 0 0 0 3px rgba(196, 146, 58, 0.12);
}
.ueber-history p:last-child {
  margin-bottom: 0 !important;
}
.ueber-history p:last-child::before {
  border-color: var(--sage);
  box-shadow: 0 0 0 3px rgba(107, 143, 113, 0.12);
}

/* ── Gruppenleitung image in content ── */
.page-content img {
  border-radius: var(--radius-md);
  box-shadow: 0 8px 32px rgba(27, 58, 45, 0.12);
  margin-bottom: var(--space-md);
  border: 1px solid rgba(27, 58, 45, 0.07);
}

/* ── Leader section ── */
.ueber-leaders-section {
  margin-top: var(--space-lg);
}

.ueber-section-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: var(--space-md);
}
.ueber-section-header::before {
  content: '';
  display: block;
  width: 2rem;
  height: 1px;
  background: rgba(27, 58, 45, 0.18);
  flex-shrink: 0;
}
.ueber-section-header::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(to right, rgba(27, 58, 45, 0.18), transparent);
}
.ueber-section-title {
  font-family: var(--font-display);
  font-size: 0.78rem;
  font-weight: 600;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--sage);
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0.45rem;
}
.ueber-section-icon {
  width: 15px;
  height: 15px;
  flex-shrink: 0;
}

/* ── Leader grid ── */
.leader-grid-v2 {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1px;
  background: rgba(27, 58, 45, 0.1);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.leader-card-v2 {
  background: var(--white);
  padding: 1.75rem 1.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  transition: background 0.2s ease;
}

.leader-card-v2:hover {
  background: rgba(246, 241, 234, 0.7);
}

.leader-avatar-v2 {
  width: 3.5rem;
  height: 3.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 500;
  font-variation-settings: "opsz" 24;
  margin-bottom: 0.9rem;
  letter-spacing: 0.02em;
}

/* Cycle avatar colors */
.leader-card-v2:nth-child(4n+1) .leader-avatar-v2 {
  background: rgba(27, 58, 45, 0.1);
  color: var(--forest);
  border: 1.5px solid rgba(27, 58, 45, 0.15);
}
.leader-card-v2:nth-child(4n+2) .leader-avatar-v2 {
  background: rgba(196, 146, 58, 0.1);
  color: #9a6e1f;
  border: 1.5px solid rgba(196, 146, 58, 0.2);
}
.leader-card-v2:nth-child(4n+3) .leader-avatar-v2 {
  background: rgba(107, 143, 113, 0.12);
  color: #456b4a;
  border: 1.5px solid rgba(107, 143, 113, 0.2);
}
.leader-card-v2:nth-child(4n+4) .leader-avatar-v2 {
  background: rgba(212, 115, 78, 0.1);
  color: #a84e2a;
  border: 1.5px solid rgba(212, 115, 78, 0.18);
}

.leader-name-v2 {
  font-family: var(--font-display);
  font-size: 1rem;
  font-weight: 500;
  font-variation-settings: "opsz" 20;
  color: var(--bark);
  margin-bottom: 0.2rem;
  line-height: 1.3;
}

.leader-role-v2 {
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--sage);
}

/* Leaders grid spacing when directly under photo */
.leader-grid-v2 {
  margin-top: var(--space-sm);
}

/* Responsive */
@media (max-width: 600px) {
  .ueber-motto-block {
    padding: 3.5rem var(--space-md) var(--space-md);
  }
  .ueber-motto-icon {
    top: var(--space-md);
    left: 50%;
    transform: translateX(-50%);
  }
  .leader-grid-v2 {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ── DARK MODE ── */
[data-theme="dark"] .page-content h2::before { background: rgba(255,255,255,0.1); }
[data-theme="dark"] .page-content h2::after { background: linear-gradient(to right, rgba(255,255,255,0.1), transparent) !important; }
[data-theme="dark"] .ueber-lead { color: rgba(213,205,192,0.75); }
[data-theme="dark"] .ueber-history p { color: rgba(213,205,192,0.75); }
[data-theme="dark"] .ueber-history p::before { background: var(--cream); }
[data-theme="dark"] .ueber-section-header::before { background: rgba(255,255,255,0.1); }
[data-theme="dark"] .ueber-section-header::after { background: linear-gradient(to right, rgba(255,255,255,0.1), transparent); }
[data-theme="dark"] .leader-grid-v2 { background: rgba(255,255,255,0.05); }
[data-theme="dark"] .leader-card-v2:hover { background: rgba(255,255,255,0.04); }
[data-theme="dark"] .leader-card-v2:nth-child(4n+1) .leader-avatar-v2 { background: rgba(130,204,162,0.1); color: #82cca2; border-color: rgba(130,204,162,0.2); }
[data-theme="dark"] .leader-card-v2:nth-child(4n+2) .leader-avatar-v2 { background: rgba(218,168,80,0.1); color: var(--amber); border-color: rgba(218,168,80,0.2); }
[data-theme="dark"] .leader-card-v2:nth-child(4n+3) .leader-avatar-v2 { background: rgba(138,184,146,0.1); color: var(--sage); border-color: rgba(138,184,146,0.2); }
[data-theme="dark"] .leader-card-v2:nth-child(4n+4) .leader-avatar-v2 { background: rgba(228,131,78,0.1); color: #e4834e; border-color: rgba(228,131,78,0.18); }
[data-theme="dark"] .page-content img { box-shadow: 0 8px 32px rgba(0,0,0,0.25); border-color: rgba(255,255,255,0.06); }
</style>

<section class="page-single">
  <div class="page-hero">
    <div class="page-hero-inner">
      <h1 class="page-title" data-animate="fade-up">{{ .Title }}</h1>
      {{ with .Params.subtitle }}
      <p class="page-subtitle" data-animate="fade-up" data-delay="1">{{ . }}</p>
      {{ end }}
    </div>
  </div>

  <div class="page-content content-width" data-animate="fade-up" data-delay="2">
    {{ .Content }}
    {{ with .Params.leaders }}
    <div class="leader-grid-v2" data-animate="fade-up">
      {{ range . }}
      <div class="leader-card-v2">
        <div class="leader-avatar-v2">{{ .initials }}</div>
        <div class="leader-name-v2">{{ .name }}</div>
        <div class="leader-role-v2">{{ .role }}</div>
      </div>
      {{ end }}
    </div>
    {{ end }}
  </div>

  <script>
  (function () {
    var content = document.querySelector('.page-content');
    if (!content) return;

    var children = Array.from(content.children);

    // Helper: collect siblings until next H2 (or end)
    function collectUntilH2(startEl) {
      var nodes = [];
      var el = startEl;
      while (el && el.tagName !== 'H2') {
        nodes.push(el);
        el = el.nextElementSibling;
      }
      return nodes;
    }

    // Find h2 by keyword
    function findH2(keyword) {
      return Array.from(content.querySelectorAll('h2')).find(function(h) {
        return h.textContent.includes(keyword);
      });
    }

    // ── Wrap Motto section ──
    var mottoH2 = findH2('Motto');
    if (mottoH2) {
      var mottoNodes = collectUntilH2(mottoH2.nextElementSibling);
      if (mottoNodes.length) {
        var mottoWrap = document.createElement('div');
        mottoWrap.className = 'ueber-motto-block';
        mottoWrap.innerHTML =
          '<svg class="ueber-motto-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">' +
          '<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>' +
          '</svg>';
        mottoH2.parentNode.insertBefore(mottoWrap, mottoNodes[0]);
        mottoNodes.forEach(function(n) { mottoWrap.appendChild(n); });
      }
    }

    // ── Wrap Geschichte paragraphs ──
    var histH2 = findH2('Geschichte');
    if (histH2) {
      var histNodes = collectUntilH2(histH2.nextElementSibling);
      if (histNodes.length) {
        var histWrap = document.createElement('div');
        histWrap.className = 'ueber-history';
        histH2.parentNode.insertBefore(histWrap, histNodes[0]);
        histNodes.forEach(function(n) { histWrap.appendChild(n); });
      }
    }
  })();
  </script>

</section>
{{ end }}
